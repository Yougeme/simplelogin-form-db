{% extends "base.html" %}
{% block content %}
<div class = "navbar navbar-default navbar-fixed-top" style="line-height:20px; height:20px;">
  <div class="pull-left" id="disconnect">
    <button type="button" class="btn btn-default navbar-btn">Disconnect</button>
  </div>
</div>
<div class="container">
  <h3>{{ thisuser.name.givenName+' '+thisuser.name.familyName }}</h3>
  <div>
    <img src="{{thisuser.image.url}}">
  </div>
</div>
{% endblock %}
{% block script %}
<script type="text/javascript">
  var helper = (function() {

      return {
      /**
       * Calls the server endpoint to disconnect the app for the user.
       */
disconnectServer: function() {
// Revoke the server tokens
$.ajax({
type: 'POST',
url: '{{ url_for('disconnect') }}',
async: false,
success: function(result) {
console.log('revoke response: ' + result);
// window.location = 'http://localhost:4567/login'          
window.location = '{{ url_for('login') }}'          
},
error: function(e) {
console.log(e);
}
});
},
  };
})();

/**
 * Perform jQuery initialization
 */
$(document).ready(function() {
    $('#disconnect').click(helper.disconnectServer);
    });
  </script>

  {% endblock %}


<html>
  <head>
    <title>{{ appname }}</title>
  <script type="text/javascript">
  (function() {
    var po = document.createElement('script');
    po.type = 'text/javascript'; po.async = true;
    po.src = 'https://plus.google.com/js/client:plusone.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(po, s);
  })();
  </script>
  <!-- JavaScript specific to this application that is not related to API
     calls -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" ></script>
</head>

  <body>
    {% block content %}{% endblock %}
    <button id="disconnect" >Disconnect your Google account from this app</button>
  </body>
  <script type="text/javascript">
    var helper = (function() {

        return {
        /**
         * Calls the server endpoint to disconnect the app for the user.
         */
disconnectServer: function() {
// Revoke the server tokens
$.ajax({
type: 'POST',
url: '{{ url_for('disconnect') }}',
async: false,
success: function(result) {
console.log('revoke response: ' + result);
// window.location = 'http://localhost:4567/login'          
window.location = '{{ url_for('login') }}'          
},
error: function(e) {
console.log(e);
}
});
},
  };
})();

/**
 * Perform jQuery initialization and check to ensure that you updated your
 * client ID.
 */
$(document).ready(function() {
    $('#disconnect').click(helper.disconnectServer);
    });

/**
 * Calls the helper method that handles the authentication flow.
 *
 * @param {Object} authResult An Object which contains the access token and
 *   other authentication information.
 */
</script>

</html>
